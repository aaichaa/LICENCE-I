pkg load image
I0 = [
    0 0 0 0 0 0 0 0 0 0 0 0 0 0 0;
    0 0 0 0 0 0 1 0 0 0 0 0 0 0 0;
    0 0 1 0 1 0 0 0 0 0 0 0 1 0 0;
    0 0 1 1 1 0 0 0 0 1 0 0 0 0 0;
    0 0 1 1 1 0 0 0 0 0 0 0 0 0 0;
    0 0 0 1 0 0 0 0 0 0 0 0 0 0 0;
    0 0 0 1 1 1 1 1 1 1 1 1 0 0 0;
    0 1 0 1 1 1 1 1 1 1 0 1 0 0 0;
    0 0 0 1 1 1 1 1 1 1 0 1 0 0 0;
    0 0 0 1 1 1 1 1 1 1 0 0 0 0 0;
    0 0 0 1 1 1 1 1 1 1 0 0 0 0 0;
    0 0 0 1 0 0 0 0 0 1 0 0 0 0 0;
    0 0 0 1 0 0 0 0 0 1 0 0 1 0 0;
    0 0 0 1 0 0 0 0 0 1 0 0 0 0 0;
    0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
]
figure;
imshow(I0);

ES = strel('square',3);
I1 = imopen(I0,ES);
figure;
imshow(I1);
test = I1;
while(any(test(:))
  I2 = imdilate(I1,ES);
  I3 = min(I2,I0);
  test = I3-I1
  I1 = I3;
  figure,
  imshow(I1);

end
